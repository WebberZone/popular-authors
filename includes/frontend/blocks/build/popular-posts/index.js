(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,a=window.React,o=(0,a.createElement)("svg",{fill:"#0a0a0a",xmlns:"http://www.w3.org/2000/svg",viewBox:"-47.45 -47.45 569.4 569.4",xmlSpace:"preserve"},(0,a.createElement)("rect",{x:-47.45,y:-47.45,width:569.4,height:569.4,rx:0,fill:"#FFBD59"}),(0,a.createElement)("g",{strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.createElement)("path",{d:"M120.252 169c15.843 11.233 33.784 17.167 51.879 17.167 23.687 0 47.017-9.958 65.688-28.043 4.979-4.827 10.189-10.468 11.591-12.131a14.4 14.4 0 0 0 1.646-2.476c17.936-33.883 14.934-68.928-8.227-96.151-5.497-6.457-10.369-11.933-12.121-13.627-.901-.868-2.008-1.645-3.283-2.3-16.123-8.292-32.451-12.5-48.53-12.5-22.099 0-43.439 7.836-63.416 23.285a12.8 12.8 0 0 0-2.283 2.247c-1.424 1.836-6.033 8.127-10.146 14.157C76.479 97.605 83.556 142.99 120.252 169m11.501-105.188c.406-.432.769-.883 1.102-1.34 1.404-1.945 7.426-7.185 14.416-10.697 15.282-7.681 32.388-9.328 49.435-4.783 7.992 2.133 19.042 8.955 24.62 15.208 14.429 16.161 18.984 34.974 13.178 54.398-2.184 7.305-5.746 13.784-6.965 15.068-13.238 17.778-31.77 27.424-52.417 27.424-25.21 0-49.13-14.665-58.166-35.668-4.852-11.288-9.396-34.053 14.797-59.61m214.605 222.542c-8.18.208-15.935.427-22.901.66.143 2.488.32 4.986.447 7.475 1.193 24.521 1.976 49.048 2.579 73.59.335 13.903.462 27.807.528 41.711-16.417.015-32.819.188-49.221 1.035-.884-35.159-2.671-79.236-4.148-105.602-.808-14.432-23.318-14.513-22.506 0 1.833 32.764 4.164 93.019 4.621 129.347-51.56-.193-103.116-1.006-154.678-1.184-.16-36.19-.843-94.439-.904-126.294-.025-14.513-22.531-14.513-22.505 0 .045 23.714.437 62.083.703 95.075-18.184.838-36.383 1.021-54.583 1.051-2.544-50.525-.589-101.042.421-151.604 4.581-9.449 11.824-16.328 21.896-19.646 31.91-3.361 63.987-4.74 96.06-5.21 32.194-.467 64.391.016 96.578.355 11.44.12 22.871-.033 34.312-.089 3.147-6.058 7.362-9.006 11.004-10.404-4.905-2.288-8.542-6.724-11.01-12.256-7.616.16-15.238.427-22.77.358-16.559-.15-33.116-.368-49.672-.515-33.134-.29-66.288-.279-99.396 1.206-18.583.838-37.153 2.127-55.652 4.093-1.419-.16-2.966-.046-4.634.464-16.09 4.913-29.744 15.958-36.727 31.427a15.2 15.2 0 0 0-1.244 4.388c-.731 1.427-1.196 3.093-1.231 5.042-1.056 53.786-3.291 107.512 0 161.277.287 4.626 2.808 7.759 6.058 9.425 1.663 1.584 3.94 2.63 6.911 2.63 21.287 0 42.566-.092 63.828-1.076.046 7.14.079 13.767.089 19.479.005 1.991.457 3.672 1.186 5.119 1.277 3.65 4.431 6.565 9.463 6.57 60.179.071 120.351 1.239 180.527 1.311 9.414.01 12.238-10.146 8.521-16.315-.021-2.377-.051-4.9-.086-7.516 17.229-.878 34.479-1.021 51.744-1.021 2.722 0 4.87-.884 6.5-2.244 6.18.924 13.147-2.646 13.132-10.725-.071-35.222-1.478-70.325-2.574-105.521-.264-8.601-.396-17.234-.666-25.866m-58.406-139.39c1.03.521 2.229.838 3.646.838.381 0 .782-.028 1.198-.074 20.927-2.506 149.801-3.801 170.834-5.04 12.812-.754 8.475-16.676 8.562-24.616.102-8.736 4.895-24.028-9.882-24.028-21.424 0-150.658.094-172.088 1.259-11.857.645-9.039 13.188-8.282 21.36.878 9.443-4.784 24.839 6.012 30.301m165.999-34.013s-2.225 6.246.381 11.408c-14.849.906-137.532 1.944-152.319 3.479.152-8.877-2.133-14.059-2.133-14.059 15.401-.619 138.659-.797 154.071-.828m10.714 47.594c-21.398-1.166-150.658-1.257-172.087-1.257-15.249 0-16.646 33.72-7.525 44.973 1.716 2.115 3.768 3.529 6.205 3.672 3.869.229 11.415.457 21.241.695 43.584 1.062 132.515 2.298 149.592 4.342a9 9 0 0 0 1.198.074c1.412 0 2.61-.317 3.642-.838 4.352-2.199 5.748-5.215 5.997-8.668.324-4.601-1.401-9.978-.904-15.213.62-6.515 4.864-16.704.595-22.668-1.383-2.756-4.023-4.899-7.954-5.112m-11.791 32.542c-14.792-1.536-137.471-2.574-152.323-3.479 2.609-5.159.381-11.41.381-11.41 15.411.03 138.669.208 154.07.828.005 0-2.285 5.18-2.128 14.061"}),(0,a.createElement)("path",{d:"M469.043 227.374c-1.523-1.701-3.763-2.838-6.733-2.838-14.808 0-81.07.045-127.691.457-20.854.183-37.79.441-44.412.802-1.346.071-2.508.557-3.6 1.201-11.918 7.066-8.902 45.278 1.341 50.457 1.03.523 2.229.838 3.646.838q.573-.001 1.198-.071c4.937-.594 15.925-1.117 30.042-1.584a2934 2934 0 0 1 23.089-.67c45.438-1.158 104.104-1.98 117.702-2.783 13.808-.822 8.506-25.958 10.304-35.434.918-4.805-1.525-8.466-4.886-10.375m-124.558 29.579c-8.46.172-16.245.345-22.846.527-9.603.265-16.723.549-19.627.849.152-8.877-2.133-14.062-2.133-14.062 2.93-.121 9.791-.218 19.053-.305 6.738-.061 14.771-.121 23.501-.172 42.289-.244 101.174-.325 111.518-.351 0 0-2.225 6.246.381 11.41-9.917.611-67.989 1.276-109.847 2.104"})),l=window.wp.i18n,r=window.wp.components,n=window.wp.blockEditor,s=window.wp.serverSideRender;var p=e.n(s);const u=window.wp.data;window.wp.coreData;const i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"popular-authors/popular-posts","version":"1.0.0","title":"Popular Posts by Author","category":"design","icon":"admin-users","keywords":["popular posts","post","author"],"description":"Show the list of popular posts by author","supports":{"html":false},"example":{},"attributes":{"className":{"type":"string","default":""},"author":{"type":"string","default":""},"postsPerPage":{"type":"number","default":10},"postType":{"type":"string","default":"post"},"orderby":{"type":"string","default":"visits"},"order":{"type":"string","default":"DESC"},"daily":{"type":"boolean","default":false},"dailyRange":{"type":"number","default":1},"hourRange":{"type":"number","default":0},"showOptionCount":{"type":"boolean","default":false},"other_attributes":{"type":"string","default":""}},"textdomain":"popular-authors","editorScript":"file:./index.js"}');(0,t.registerBlockType)("popular-authors/popular-posts",{...i,icon:o,edit:function(e){const{attributes:t,setAttributes:o}=e,s=(0,n.useBlockProps)(),{author:i,postsPerPage:c,postType:d,orderby:m,order:h,daily:g,dailyRange:_,hourRange:b,showOptionCount:y}=t,{authors:w,isLoading:f,postTypes:v,postTypeMap:E}=(0,u.useSelect)((e=>{const{getUsers:t}=e("core"),{getPostTypes:a}=e("core"),o={per_page:-1,has_published_posts:!0,context:"edit"},l={},r=a({per_page:-1})?.filter((e=>e.viewable))||[];return r.forEach((e=>{l[e.slug]=e.name})),{authors:t(o),isLoading:!e("core").hasFinishedResolution("getUsers",[o]),postTypes:r,postTypeMap:l}}),[]),C=d?d.split(","):["post"],S=v?.map((e=>({value:e.slug,label:e.name})))||[];return(0,a.createElement)("div",{...s},(0,a.createElement)(n.InspectorControls,null,(0,a.createElement)(r.PanelBody,{title:(0,l.__)("Settings","popular-authors")},f?(0,a.createElement)(r.Spinner,null):(0,a.createElement)(r.SelectControl,{label:(0,l.__)("Author","popular-authors"),value:i,options:[{label:(0,l.__)("Select an author","popular-authors"),value:""},...w?w.map((e=>{let t="";return t=e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.first_name?e.first_name:e.last_name?e.last_name:e.display_name?e.display_name:e.name,{label:t,value:e.id.toString()}})):[]],onChange:e=>{o({author:e,field:"id"})}}),(0,a.createElement)(r.RangeControl,{label:(0,l.__)("Number of posts","popular-authors"),value:c,onChange:e=>o({postsPerPage:e}),min:1,max:100}),(0,a.createElement)(r.FormTokenField,{label:(0,l.__)("Post Types","popular-authors"),value:C.map((e=>S.find((t=>t.value===e))?.label||e)),suggestions:S.map((e=>e.label)),onChange:e=>{const t=e.map((e=>S.find((t=>t.label===e))?.value||e));o({postType:t.join(",")})},__experimentalShowHowTo:!1,__experimentalExpandOnFocus:!0}),(0,a.createElement)(r.SelectControl,{label:(0,l.__)("Order By","popular-authors"),value:m,options:[{label:(0,l.__)("Visits","popular-authors"),value:"visits"},{label:(0,l.__)("Date","popular-authors"),value:"date"},{label:(0,l.__)("Title","popular-authors"),value:"title"}],onChange:e=>o({orderby:e})}),(0,a.createElement)(r.SelectControl,{label:(0,l.__)("Order","popular-authors"),value:h,options:[{label:(0,l.__)("Descending","popular-authors"),value:"DESC"},{label:(0,l.__)("Ascending","popular-authors"),value:"ASC"}],onChange:e=>o({order:e})}),(0,a.createElement)(r.ToggleControl,{label:(0,l.__)("Custom period?","popular-authors"),checked:g,onChange:e=>o({daily:e})}),g&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(r.RangeControl,{label:(0,l.__)("Number of days","popular-authors"),value:_,onChange:e=>o({dailyRange:e})}),(0,a.createElement)(r.RangeControl,{label:(0,l.__)("Number of hours","popular-authors"),value:b,onChange:e=>o({hourRange:e}),max:24})),(0,a.createElement)(r.ToggleControl,{label:(0,l.__)("Display post count?","popular-authors"),checked:y,onChange:e=>o({showOptionCount:e})}))),(0,a.createElement)("div",{...s},(0,a.createElement)(r.Disabled,null,(0,a.createElement)(p(),{block:"popular-authors/popular-posts",attributes:t}))))}})})();